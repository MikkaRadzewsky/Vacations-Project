{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useForm}from\"react-hook-form\";import{useNavigate}from\"react-router-dom\";import CredentialsModel from\"../../../Models/CredentialsModel\";import{VacationsActionType,vacationsStore}from\"../../../Redux/VacationsState\";import authService from\"../../../Services/AuthService\";import notifyService from\"../../../Services/NotifyService\";import\"./Login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _formState$errors$use,_formState$errors$pas;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,formState=_useForm.formState;var navigate=useNavigate();function send(_x){return _send.apply(this,arguments);}function _send(){_send=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(credentials){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;vacationsStore.dispatch({type:VacationsActionType.EmptyStore,payload:[]});_context.next=4;return authService.login(credentials);case 4:notifyService.success(\"Welcome Back!\");navigate(\"/home\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);notifyService.error(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _send.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"Login Box\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(send),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Username: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\"},register(\"username\",CredentialsModel.usernameValidation))),/*#__PURE__*/_jsx(\"span\",{className:\"Error\",children:(_formState$errors$use=formState.errors.username)===null||_formState$errors$use===void 0?void 0:_formState$errors$use.message}),/*#__PURE__*/_jsx(\"label\",{children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\"},register(\"password\",CredentialsModel.passwordValidation))),/*#__PURE__*/_jsx(\"span\",{className:\"Error\",children:(_formState$errors$pas=formState.errors.password)===null||_formState$errors$pas===void 0?void 0:_formState$errors$pas.message}),/*#__PURE__*/_jsx(\"button\",{children:\"Login\"})]})});}export default Login;","map":{"version":3,"names":["useForm","useNavigate","CredentialsModel","VacationsActionType","vacationsStore","authService","notifyService","Login","register","handleSubmit","formState","navigate","send","credentials","dispatch","type","EmptyStore","payload","login","success","error","usernameValidation","errors","username","message","passwordValidation","password"],"sources":["/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/src/Components/AuthArea/Login/Login.tsx"],"sourcesContent":["import { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport CredentialsModel from \"../../../Models/CredentialsModel\";\nimport { VacationsActionType, vacationsStore } from \"../../../Redux/VacationsState\";\nimport authService from \"../../../Services/AuthService\";\nimport notifyService from \"../../../Services/NotifyService\";\nimport \"./Login.css\";\n\nfunction Login(): JSX.Element {\n\n    const { register, handleSubmit, formState  } = useForm<CredentialsModel>();\n    const navigate = useNavigate();\n\n    async function send(credentials: CredentialsModel) {\n        try {\n            vacationsStore.dispatch({ type: VacationsActionType.EmptyStore, payload: [] });\n            await authService.login(credentials);\n            notifyService.success(\"Welcome Back!\");\n            navigate(\"/home\");\n        }\n        catch(err: any) {\n            notifyService.error(err);\n        }\n    }\n\n    return (\n        <div className=\"Login Box\">\n\n            <form onSubmit={handleSubmit(send)}>\n\n                <h2>Login</h2>\n\n                <label>Username: </label>\n                <input type=\"text\" {...register(\"username\", CredentialsModel.usernameValidation)} />\n                <span className=\"Error\">{formState.errors.username?.message}</span>\n\n                <label>Password: </label>\n                <input type=\"password\" {...register(\"password\", CredentialsModel.passwordValidation)} />\n                <span className=\"Error\">{formState.errors.password?.message}</span>\n\n                <button>Login</button>\n\n            </form>\n\n        </div>\n    );\n}\n\nexport default Login;\n"],"mappings":"+tBAAA,OAASA,OAAO,KAAQ,iBAAiB,CACzC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,iBAAgB,KAAM,kCAAkC,CAC/D,OAASC,mBAAmB,CAAEC,cAAc,KAAQ,+BAA+B,CACnF,MAAOC,YAAW,KAAM,+BAA+B,CACvD,MAAOC,cAAa,KAAM,iCAAiC,CAC3D,MAAO,aAAa,CAAC,wFAErB,QAASC,MAAK,EAAgB,iDAE1B,aAA+CP,OAAO,EAAoB,CAAlEQ,QAAQ,UAARA,QAAQ,CAAEC,YAAY,UAAZA,YAAY,CAAEC,SAAS,UAATA,SAAS,CACzC,GAAMC,SAAQ,CAAGV,WAAW,EAAE,CAAC,QAEhBW,KAAI,0HAAnB,iBAAoBC,WAA6B,oIAEzCT,cAAc,CAACU,QAAQ,CAAC,CAAEC,IAAI,CAAEZ,mBAAmB,CAACa,UAAU,CAAEC,OAAO,CAAE,EAAG,CAAC,CAAC,CAAC,sBACzEZ,YAAW,CAACa,KAAK,CAACL,WAAW,CAAC,QACpCP,aAAa,CAACa,OAAO,CAAC,eAAe,CAAC,CACtCR,QAAQ,CAAC,OAAO,CAAC,CAAC,+EAGlBL,aAAa,CAACc,KAAK,aAAK,CAAC,oEAEhC,uCAED,mBACI,YAAK,SAAS,CAAC,WAAW,uBAEtB,cAAM,QAAQ,CAAEX,YAAY,CAACG,IAAI,CAAE,wBAE/B,6BAAc,cAEd,qCAAyB,cACzB,4BAAO,IAAI,CAAC,MAAM,EAAKJ,QAAQ,CAAC,UAAU,CAAEN,gBAAgB,CAACmB,kBAAkB,CAAC,EAAI,cACpF,aAAM,SAAS,CAAC,OAAO,iCAAEX,SAAS,CAACY,MAAM,CAACC,QAAQ,gDAAzB,sBAA2BC,OAAO,EAAQ,cAEnE,qCAAyB,cACzB,4BAAO,IAAI,CAAC,UAAU,EAAKhB,QAAQ,CAAC,UAAU,CAAEN,gBAAgB,CAACuB,kBAAkB,CAAC,EAAI,cACxF,aAAM,SAAS,CAAC,OAAO,iCAAEf,SAAS,CAACY,MAAM,CAACI,QAAQ,gDAAzB,sBAA2BF,OAAO,EAAQ,cAEnE,iCAAsB,GAEnB,EAEL,CAEd,CAEA,cAAejB,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}