{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{NavLink}from\"react-router-dom\";import FollowerModel from\"../../../Models/FollowerModel\";import authService from\"../../../Services/AuthService\";import notifyService from\"../../../Services/NotifyService\";import vacationsService from\"../../../Services/VacationsService\";import{Config}from\"../../../Utils/Config\";import\"./VacationCard.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function VacationCard(props){var _useState=useState(props.vacation.followersCount),_useState2=_slicedToArray(_useState,2),followers=_useState2[0],setFollowers=_useState2[1];var _useState3=useState(props.vacation.isFollowing),_useState4=_slicedToArray(_useState3,2),isFollowing=_useState4[0],setIsFollowing=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),userId=_useState6[0],setUserId=_useState6[1];useEffect(function(){authService.getUserIdFromToken().then(function(id){setUserId(id);}).catch(function(err){return notifyService.error(err);});},[]);function click(){return _click.apply(this,arguments);}function _click(){_click=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var vacationId,_userId,follower;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;vacationId=props.vacation.vacationId;_context.next=4;return authService.getUserIdFromToken();case 4:_userId=_context.sent;follower=new FollowerModel();follower.vacationId=vacationId;follower.userId=_userId;if(isFollowing){setIsFollowing(0);setFollowers(followers-1);vacationsService.deleteFollower(follower);}else{setIsFollowing(1);setFollowers(followers+1);vacationsService.addFollower(follower);}_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);notifyService.error(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return _click.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"VacationCard Box font-link\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",disabled:userId===1||userId===0?true:false,checked:isFollowing===1?true:false,onChange:function onChange(){return click();}}),/*#__PURE__*/_jsx(\"div\",{className:\"checkmark\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Likes\",children:followers}),/*#__PURE__*/_jsxs(\"div\",{className:\"Container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:props.vacation.destination}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:props.vacation.description}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"/vacations/details/\"+props.vacation.vacationId,children:/*#__PURE__*/_jsx(\"img\",{src:Config.serverUrl+\"/api/images/\"+props.vacation.imageName})})})]});}export default VacationCard;","map":{"version":3,"names":["useEffect","useState","NavLink","FollowerModel","authService","notifyService","vacationsService","Config","VacationCard","props","vacation","followersCount","followers","setFollowers","isFollowing","setIsFollowing","userId","setUserId","getUserIdFromToken","then","id","catch","err","error","click","vacationId","follower","deleteFollower","addFollower","destination","description","serverUrl","imageName"],"sources":["/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/src/Components/VacationsArea/VacationCard/VacationCard.tsx"],"sourcesContent":["\nimport { useEffect, useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport FollowerModel from \"../../../Models/FollowerModel\";\nimport VacationModel from \"../../../Models/VacationModel\";\nimport authService from \"../../../Services/AuthService\";\nimport notifyService from \"../../../Services/NotifyService\";\nimport vacationsService from \"../../../Services/VacationsService\";\nimport { Config } from \"../../../Utils/Config\";\nimport \"./VacationCard.css\";\n\ninterface VacationCardProps {\n  vacation: VacationModel;\n}\n\nfunction VacationCard(props: VacationCardProps): JSX.Element {\n\n    const [followers, setFollowers] = useState(props.vacation.followersCount);\n    const [isFollowing, setIsFollowing] = useState(props.vacation.isFollowing);\n    const [userId, setUserId] = useState<number>();\n\n    useEffect(() => {\n\n            authService.getUserIdFromToken()\n            .then(id => {setUserId(id)})\n            .catch(err => notifyService.error(err));\n            \n    }, []);\n\n\n  async function click() {\n    try {\n        \n            const vacationId = props.vacation.vacationId;\n            const userId = await authService.getUserIdFromToken();\n\n            const follower = new FollowerModel();\n            follower.vacationId = vacationId;\n            follower.userId = userId;\n\n        if (isFollowing) {\n            setIsFollowing(0)\n            setFollowers(followers-1)\n            vacationsService.deleteFollower(follower);\n         } else {\n            setIsFollowing(1)\n            setFollowers(followers+1)\n            vacationsService.addFollower(follower);\n        }\n\n    } catch (err: any) {\n      notifyService.error(err);\n    }\n  }\n\n  return (\n    <div className=\"VacationCard Box font-link\">\n      <label className=\"container\" >\n        <input\n          type=\"checkbox\"\n          disabled={userId===1 || userId===0? true : false}\n          checked={isFollowing === 1 ? true : false}\n          onChange={() => click()}\n        />\n        <div className=\"checkmark\"></div>\n      </label>\n      <div className=\"Likes\">{followers}</div>\n      <div className=\"Container\">\n        <h2>{props.vacation.destination}</h2>\n        <br />\n        <span>{props.vacation.description}</span>\n        <br />\n      </div>\n      <div>\n        <NavLink to={\"/vacations/details/\" + props.vacation.vacationId}>\n          <img src={Config.serverUrl+\"/api/images/\" + props.vacation.imageName} />\n        </NavLink>\n      </div>\n    </div>\n  );\n}\n\nexport default VacationCard;\n"],"mappings":"guBACA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,OAAO,KAAQ,kBAAkB,CAC1C,MAAOC,cAAa,KAAM,+BAA+B,CAEzD,MAAOC,YAAW,KAAM,+BAA+B,CACvD,MAAOC,cAAa,KAAM,iCAAiC,CAC3D,MAAOC,iBAAgB,KAAM,oCAAoC,CACjE,OAASC,MAAM,KAAQ,uBAAuB,CAC9C,MAAO,oBAAoB,CAAC,wFAM5B,QAASC,aAAY,CAACC,KAAwB,CAAe,CAEzD,cAAkCR,QAAQ,CAACQ,KAAK,CAACC,QAAQ,CAACC,cAAc,CAAC,wCAAlEC,SAAS,eAAEC,YAAY,eAC9B,eAAsCZ,QAAQ,CAACQ,KAAK,CAACC,QAAQ,CAACI,WAAW,CAAC,yCAAnEA,WAAW,eAAEC,cAAc,eAClC,eAA4Bd,QAAQ,EAAU,yCAAvCe,MAAM,eAAEC,SAAS,eAExBjB,SAAS,CAAC,UAAM,CAERI,WAAW,CAACc,kBAAkB,EAAE,CAC/BC,IAAI,CAAC,SAAAC,EAAE,CAAI,CAACH,SAAS,CAACG,EAAE,CAAC,EAAC,CAAC,CAC3BC,KAAK,CAAC,SAAAC,GAAG,QAAIjB,cAAa,CAACkB,KAAK,CAACD,GAAG,CAAC,GAAC,CAE/C,CAAC,CAAE,EAAE,CAAC,CAAC,QAGME,MAAK,2HAApB,qLAGgBC,UAAU,CAAGhB,KAAK,CAACC,QAAQ,CAACe,UAAU,uBACvBrB,YAAW,CAACc,kBAAkB,EAAE,QAA/CF,OAAM,eAENU,QAAQ,CAAG,GAAIvB,cAAa,EAAE,CACpCuB,QAAQ,CAACD,UAAU,CAAGA,UAAU,CAChCC,QAAQ,CAACV,MAAM,CAAGA,OAAM,CAE5B,GAAIF,WAAW,CAAE,CACbC,cAAc,CAAC,CAAC,CAAC,CACjBF,YAAY,CAACD,SAAS,CAAC,CAAC,CAAC,CACzBN,gBAAgB,CAACqB,cAAc,CAACD,QAAQ,CAAC,CAC5C,CAAC,IAAM,CACJX,cAAc,CAAC,CAAC,CAAC,CACjBF,YAAY,CAACD,SAAS,CAAC,CAAC,CAAC,CACzBN,gBAAgB,CAACsB,WAAW,CAACF,QAAQ,CAAC,CAC1C,CAAC,iFAGHrB,aAAa,CAACkB,KAAK,aAAK,CAAC,qEAE5B,wCAED,mBACE,aAAK,SAAS,CAAC,4BAA4B,wBACzC,eAAO,SAAS,CAAC,WAAW,wBAC1B,cACE,IAAI,CAAC,UAAU,CACf,QAAQ,CAAEP,MAAM,GAAG,CAAC,EAAIA,MAAM,GAAG,CAAC,CAAE,IAAI,CAAG,KAAM,CACjD,OAAO,CAAEF,WAAW,GAAK,CAAC,CAAG,IAAI,CAAG,KAAM,CAC1C,QAAQ,CAAE,0BAAMU,MAAK,EAAE,EAAC,EACxB,cACF,YAAK,SAAS,CAAC,WAAW,EAAO,GAC3B,cACR,YAAK,SAAS,CAAC,OAAO,UAAEZ,SAAS,EAAO,cACxC,aAAK,SAAS,CAAC,WAAW,wBACxB,oBAAKH,KAAK,CAACC,QAAQ,CAACmB,WAAW,EAAM,cACrC,aAAM,cACN,sBAAOpB,KAAK,CAACC,QAAQ,CAACoB,WAAW,EAAQ,cACzC,aAAM,GACF,cACN,kCACE,KAAC,OAAO,EAAC,EAAE,CAAE,qBAAqB,CAAGrB,KAAK,CAACC,QAAQ,CAACe,UAAW,uBAC7D,YAAK,GAAG,CAAElB,MAAM,CAACwB,SAAS,CAAC,cAAc,CAAGtB,KAAK,CAACC,QAAQ,CAACsB,SAAU,EAAG,EAChE,EACN,GACF,CAEV,CAEA,cAAexB,aAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}