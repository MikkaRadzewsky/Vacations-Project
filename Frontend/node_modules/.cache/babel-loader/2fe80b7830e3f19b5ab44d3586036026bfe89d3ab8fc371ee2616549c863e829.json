{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{NavLink,useNavigate}from\"react-router-dom\";import{useParams}from\"react-router-dom\";import{VacationsActionType,vacationsStore}from\"../../../Redux/VacationsState\";import authService from\"../../../Services/AuthService\";import notifyService from\"../../../Services/NotifyService\";import vacationsService from\"../../../Services/VacationsService\";import Config from\"../../../Utils/Config\";import\"./VacationDetails.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function VacationDetails(){var params=useParams();var _useState=useState(),_useState2=_slicedToArray(_useState,2),vacation=_useState2[0],setVacation=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),role=_useState4[0],setRole=_useState4[1];var navigate=useNavigate();useEffect(function(){var id=+params.vacationId;vacationsService.getOneVacation(id).then(function(vacation){return setVacation(vacation);}).catch(function(err){return notifyService.error(err);});authService.isAdmin().then(function(role){return setRole(role);}).catch(function(err){return notifyService.error(err);});},[]);function deleteVacation(_x){return _deleteVacation.apply(this,arguments);}function _deleteVacation(){_deleteVacation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;vacationsStore.dispatch({type:VacationsActionType.EmptyStore,payload:[]});_context.next=4;return vacationsService.deleteVacation(id);case 4:notifyService.success(\"Vacation has been deleted\");navigate(\"/vacations\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);notifyService.error(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _deleteVacation.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"VacationDetails\",children:[vacation&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:vacation.destination}),/*#__PURE__*/_jsx(\"h2\",{children:vacation.description}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Dates: \",vacation.startDate+\" until \"+vacation.endDate]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Price: \",vacation.price,\"$ \"]})]}),/*#__PURE__*/_jsx(\"img\",{src:Config.serverUrl+\"/api/images/\"+vacation.imageName})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(NavLink,{to:\"/vacations\",children:\"Back\"}),role&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavLink,{to:\"/vacations/edit/\"+(vacation===null||vacation===void 0?void 0:vacation.vacationId),children:\"Edit\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/vacations\",onClick:function onClick(){deleteVacation(vacation.vacationId);},children:\"Delete\"})]})]});}export default VacationDetails;","map":{"version":3,"names":["useEffect","useState","NavLink","useNavigate","useParams","VacationsActionType","vacationsStore","authService","notifyService","vacationsService","Config","VacationDetails","params","vacation","setVacation","role","setRole","navigate","id","vacationId","getOneVacation","then","catch","err","error","isAdmin","deleteVacation","dispatch","type","EmptyStore","payload","success","destination","description","startDate","endDate","price","serverUrl","imageName"],"sources":["/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/src/Components/VacationsArea/VacationDetails/VacationDetails.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport { useParams } from \"react-router-dom\";\nimport VacationModel from \"../../../Models/VacationModel\";\nimport { VacationsActionType, vacationsStore } from \"../../../Redux/VacationsState\";\nimport authService from \"../../../Services/AuthService\";\nimport notifyService from \"../../../Services/NotifyService\";\nimport vacationsService from \"../../../Services/VacationsService\";\nimport Config from \"../../../Utils/Config\";\nimport \"./VacationDetails.css\";\n\n\n\nfunction VacationDetails(): JSX.Element {\n\n    const params = useParams();\n    const [vacation, setVacation] = useState<VacationModel>();\n    const [role, setRole] = useState<boolean>();\n    const navigate = useNavigate();\n\n\n    useEffect(() => {\n        const id = +params.vacationId; \n        vacationsService.getOneVacation(id)\n            .then(vacation => setVacation(vacation))\n            .catch(err => notifyService.error(err));\n        \n            authService.isAdmin()\n            .then(role => setRole(role))\n            .catch(err => notifyService.error(err));\n        \n\n    }, []);\n\n    async function deleteVacation(id: number) {\n        try {\n            vacationsStore.dispatch({ type: VacationsActionType.EmptyStore, payload: [] });\n            await vacationsService.deleteVacation(id);\n            notifyService.success(\"Vacation has been deleted\");\n            navigate(\"/vacations\");\n        }\n        catch(err: any) {\n            notifyService.error(err);\n        }\n    }\n\n    return (\n        <div className=\"VacationDetails\">\n\n            {vacation &&\n                <>\n                <div className=\"Container\">\n                    <h1>{vacation.destination}</h1>\n                    <h2>{vacation.description}</h2>\n                    <h3>Dates: {vacation.startDate + \" until \" + vacation.endDate}</h3>\n                    <h3>Price: {vacation.price}$ </h3>\n                </div>\n                \n                    <img src={Config.serverUrl+\"/api/images/\" + vacation.imageName} />\n                    \n                </>\n            }\n\n            <br />\n            <br />\n\n            <NavLink to=\"/vacations\">Back</NavLink>\n            {role && <>\n                <NavLink  to={\"/vacations/edit/\" + vacation?.vacationId}>Edit</NavLink>\n                <NavLink to=\"/vacations\" onClick={() => {deleteVacation(vacation.vacationId)}}>Delete</NavLink>\n            </>\n            }\n\n        </div>\n    );\n}\n\nexport default VacationDetails;\n"],"mappings":"guBAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,OAAO,CAAEC,WAAW,KAAQ,kBAAkB,CACvD,OAASC,SAAS,KAAQ,kBAAkB,CAE5C,OAASC,mBAAmB,CAAEC,cAAc,KAAQ,+BAA+B,CACnF,MAAOC,YAAW,KAAM,+BAA+B,CACvD,MAAOC,cAAa,KAAM,iCAAiC,CAC3D,MAAOC,iBAAgB,KAAM,oCAAoC,CACjE,MAAOC,OAAM,KAAM,uBAAuB,CAC1C,MAAO,uBAAuB,CAAC,6IAI/B,QAASC,gBAAe,EAAgB,CAEpC,GAAMC,OAAM,CAAGR,SAAS,EAAE,CAC1B,cAAgCH,QAAQ,EAAiB,wCAAlDY,QAAQ,eAAEC,WAAW,eAC5B,eAAwBb,QAAQ,EAAW,yCAApCc,IAAI,eAAEC,OAAO,eACpB,GAAMC,SAAQ,CAAGd,WAAW,EAAE,CAG9BH,SAAS,CAAC,UAAM,CACZ,GAAMkB,GAAE,CAAG,CAACN,MAAM,CAACO,UAAU,CAC7BV,gBAAgB,CAACW,cAAc,CAACF,EAAE,CAAC,CAC9BG,IAAI,CAAC,SAAAR,QAAQ,QAAIC,YAAW,CAACD,QAAQ,CAAC,GAAC,CACvCS,KAAK,CAAC,SAAAC,GAAG,QAAIf,cAAa,CAACgB,KAAK,CAACD,GAAG,CAAC,GAAC,CAEvChB,WAAW,CAACkB,OAAO,EAAE,CACpBJ,IAAI,CAAC,SAAAN,IAAI,QAAIC,QAAO,CAACD,IAAI,CAAC,GAAC,CAC3BO,KAAK,CAAC,SAAAC,GAAG,QAAIf,cAAa,CAACgB,KAAK,CAACD,GAAG,CAAC,GAAC,CAG/C,CAAC,CAAE,EAAE,CAAC,CAAC,QAEQG,eAAc,wJAA7B,iBAA8BR,EAAU,oIAEhCZ,cAAc,CAACqB,QAAQ,CAAC,CAAEC,IAAI,CAAEvB,mBAAmB,CAACwB,UAAU,CAAEC,OAAO,CAAE,EAAG,CAAC,CAAC,CAAC,sBACzErB,iBAAgB,CAACiB,cAAc,CAACR,EAAE,CAAC,QACzCV,aAAa,CAACuB,OAAO,CAAC,2BAA2B,CAAC,CAClDd,QAAQ,CAAC,YAAY,CAAC,CAAC,+EAGvBT,aAAa,CAACgB,KAAK,aAAK,CAAC,oEAEhC,iDAED,mBACI,aAAK,SAAS,CAAC,iBAAiB,WAE3BX,QAAQ,eACL,wCACA,aAAK,SAAS,CAAC,WAAW,wBACtB,oBAAKA,QAAQ,CAACmB,WAAW,EAAM,cAC/B,oBAAKnB,QAAQ,CAACoB,WAAW,EAAM,cAC/B,gCAAYpB,QAAQ,CAACqB,SAAS,CAAG,SAAS,CAAGrB,QAAQ,CAACsB,OAAO,GAAM,cACnE,gCAAYtB,QAAQ,CAACuB,KAAK,QAAQ,GAChC,cAEF,YAAK,GAAG,CAAE1B,MAAM,CAAC2B,SAAS,CAAC,cAAc,CAAGxB,QAAQ,CAACyB,SAAU,EAAG,GAEnE,cAGP,aAAM,cACN,aAAM,cAEN,KAAC,OAAO,EAAC,EAAE,CAAC,YAAY,kBAAe,CACtCvB,IAAI,eAAI,wCACL,KAAC,OAAO,EAAE,EAAE,CAAE,kBAAkB,EAAGF,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEM,UAAU,CAAC,kBAAe,cACvE,KAAC,OAAO,EAAC,EAAE,CAAC,YAAY,CAAC,OAAO,CAAE,kBAAM,CAACO,cAAc,CAACb,QAAQ,CAACM,UAAU,CAAC,EAAE,oBAAiB,GAChG,GAGD,CAEd,CAEA,cAAeR,gBAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}