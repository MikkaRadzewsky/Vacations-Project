{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useEffect}from\"react\";import{useForm}from\"react-hook-form\";import{useNavigate}from\"react-router-dom\";import VacationModel from\"../../../Models/VacationModel\";import authService from\"../../../Services/AuthService\";import notifyService from\"../../../Services/NotifyService\";import vacationsService from\"../../../Services/VacationsService\";import\"./AddVacation.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddVacation(){var _formState$errors$des,_formState$errors$des2,_formState$errors$sta,_formState$errors$end,_formState$errors$pri,_formState$errors$ima;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,formState=_useForm.formState;var navigate=useNavigate();var currentDate=new Date().toISOString().split(\"T\")[0];function areYouAnAdmin(){return _areYouAnAdmin.apply(this,arguments);}function _areYouAnAdmin(){_areYouAnAdmin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var admin;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return authService.isAdmin();case 3:admin=_context.sent;if(admin){_context.next=8;break;}notifyService.error(\"You must be logged in as admin\");navigate(\"/vacations\");return _context.abrupt(\"return\");case 8:_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);notifyService.error(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return _areYouAnAdmin.apply(this,arguments);}useEffect(function(){areYouAnAdmin();},[]);function send(_x){return _send.apply(this,arguments);}function _send(){_send=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(vacation){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;areYouAnAdmin();if(!(new Date(vacation.startDate)>new Date(vacation.endDate))){_context2.next=5;break;}notifyService.error(\"Start date must be before the end date\");return _context2.abrupt(\"return\");case 5:_context2.next=7;return vacationsService.addVacation(vacation);case 7:notifyService.success(\"Vacation has been successfully added\");navigate(\"/vacations\");_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);notifyService.error(_context2.t0);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return _send.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"AddVacation Box\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(send),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Vacation\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Destination: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\"},register(\"destination\",VacationModel.destinationValidation))),/*#__PURE__*/_jsx(\"span\",{className:\"Error\",children:(_formState$errors$des=formState.errors.destination)===null||_formState$errors$des===void 0?void 0:_formState$errors$des.message}),/*#__PURE__*/_jsx(\"label\",{children:\"Description: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\"},register(\"description\",VacationModel.descriptionValidation))),/*#__PURE__*/_jsx(\"span\",{className:\"Error\",children:(_formState$errors$des2=formState.errors.description)===null||_formState$errors$des2===void 0?void 0:_formState$errors$des2.message}),/*#__PURE__*/_jsx(\"label\",{children:\"Start Date: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"date\",min:currentDate},register(\"startDate\",VacationModel.startDateValidation))),/*#__PURE__*/_jsx(\"span\",{className:\"Error\",children:(_formState$errors$sta=formState.errors.startDate)===null||_formState$errors$sta===void 0?void 0:_formState$errors$sta.message}),/*#__PURE__*/_jsx(\"label\",{children:\"End Date: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"date\",min:currentDate},register(\"endDate\",VacationModel.endDateValidation))),/*#__PURE__*/_jsx(\"span\",{className:\"Error\",children:(_formState$errors$end=formState.errors.endDate)===null||_formState$errors$end===void 0?void 0:_formState$errors$end.message}),/*#__PURE__*/_jsx(\"label\",{children:\"Price: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\"},register(\"price\",VacationModel.priceValidation))),/*#__PURE__*/_jsx(\"span\",{className:\"Error\",children:(_formState$errors$pri=formState.errors.price)===null||_formState$errors$pri===void 0?void 0:_formState$errors$pri.message}),/*#__PURE__*/_jsx(\"label\",{children:\"Image: \"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"file\",accept:\"image/*\"},register(\"image\"))),/*#__PURE__*/_jsx(\"span\",{className:\"Error\",children:(_formState$errors$ima=formState.errors.image)===null||_formState$errors$ima===void 0?void 0:_formState$errors$ima.message}),/*#__PURE__*/_jsx(\"button\",{children:\"Add\"})]})});}export default AddVacation;","map":{"version":3,"names":["useEffect","useForm","useNavigate","VacationModel","authService","notifyService","vacationsService","AddVacation","register","handleSubmit","formState","navigate","currentDate","Date","toISOString","split","areYouAnAdmin","isAdmin","admin","error","send","vacation","startDate","endDate","addVacation","success","destinationValidation","errors","destination","message","descriptionValidation","description","startDateValidation","endDateValidation","priceValidation","price","image"],"sources":["/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/src/Components/VacationsArea/AddVacation/AddVacation.tsx"],"sourcesContent":["import { UploadedFile } from \"express-fileupload\";\nimport { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport VacationModel from \"../../../Models/VacationModel\";\nimport authService from \"../../../Services/AuthService\";\nimport notifyService from \"../../../Services/NotifyService\";\nimport vacationsService from \"../../../Services/VacationsService\";\nimport \"./AddVacation.css\";\n\nfunction AddVacation(): JSX.Element {\n\n    const { register, handleSubmit, formState } = useForm<VacationModel>();\n    const navigate = useNavigate();\n    const currentDate = new Date().toISOString().split(\"T\")[0];\n\n    async function areYouAnAdmin() {\n        try {\n            const admin = await authService.isAdmin();\n            if (!admin) {\n                notifyService.error(\"You must be logged in as admin\");\n                navigate(\"/vacations\");\n                return;\n            }\n            }\n        catch (err: any) {\n            notifyService.error(err);\n        }\n    }\n\n    useEffect(()=>{\n        areYouAnAdmin()\n    },[])\n\n    async function send(vacation: VacationModel) {\n        try {\n            areYouAnAdmin();\n            if (new Date(vacation.startDate) > new Date(vacation.endDate)) {\n                notifyService.error(\"Start date must be before the end date\")\n                return;\n            }\n            await vacationsService.addVacation(vacation);\n            notifyService.success(\"Vacation has been successfully added\");\n            navigate(\"/vacations\");\n        }\n        catch (err: any) {\n            notifyService.error(err);\n        }\n    }\n\n    return (\n        <div className=\"AddVacation Box\">\n\n            <form onSubmit={handleSubmit(send)}>\n\n                <h2>Add Vacation</h2>\n\n                <label>Destination: </label>\n                <input type=\"text\" {...register(\"destination\", VacationModel.destinationValidation)} />\n                <span className=\"Error\">{formState.errors.destination?.message}</span>\n\n                <label>Description: </label>\n                <input type=\"text\" {...register(\"description\", VacationModel.descriptionValidation)} />\n                <span className=\"Error\">{formState.errors.description?.message}</span>\n\n                <label>Start Date: </label>\n                <input type=\"date\" min={currentDate} {...register(\"startDate\", VacationModel.startDateValidation)} />\n                <span className=\"Error\">{formState.errors.startDate?.message}</span>\n\n                <label>End Date: </label>\n                <input type=\"date\" min={currentDate}{...register(\"endDate\", VacationModel.endDateValidation)} />\n                <span className=\"Error\">{formState.errors.endDate?.message}</span>\n\n                <label>Price: </label>\n                <input type=\"number\" {...register(\"price\", VacationModel.priceValidation)} />\n                <span className=\"Error\">{formState.errors.price?.message}</span>\n\n                <label>Image: </label>\n                <input type=\"file\" accept=\"image/*\" {...register(\"image\")} />\n                <span className=\"Error\">{formState.errors.image?.message}</span>\n\n                <button>Add</button>\n\n            </form>\n\n        </div>\n    );\n}\n\nexport default AddVacation;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}