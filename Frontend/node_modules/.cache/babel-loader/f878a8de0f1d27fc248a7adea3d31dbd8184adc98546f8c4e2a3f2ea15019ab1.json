{"ast":null,"code":"import _regeneratorRuntime from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import axios from\"axios\";import{VacationsActionType,vacationsStore}from\"../Redux/VacationsState\";import Config from\"../Utils/Config\";import authService from\"./AuthService\";var VacationsService=/*#__PURE__*/function(){function VacationsService(){_classCallCheck(this,VacationsService);}_createClass(VacationsService,[{key:\"getAllVacationsWithLikes\",value:// Get all vacations + likes:\nfunction(){var _getAllVacationsWithLikes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var vacations,currentUserId,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:vacations=vacationsStore.getState().vacations;_context.next=3;return authService.getUserIdFromToken();case 3:currentUserId=_context.sent;if(!(vacations.length===0)){_context.next=10;break;}_context.next=7;return axios.get(Config.serverUrl+\"/api/liked-vacations/\"+currentUserId);case 7:response=_context.sent;// AJAX\nvacations=response.data;vacationsStore.dispatch({type:VacationsActionType.FetchVacations,payload:vacations});case 10:return _context.abrupt(\"return\",vacations);case 11:case\"end\":return _context.stop();}}},_callee);}));function getAllVacationsWithLikes(){return _getAllVacationsWithLikes.apply(this,arguments);}return getAllVacationsWithLikes;}()// Get one vacation:\n},{key:\"getOneVacation\",value:function(){var _getOneVacation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(vacationId){var response,vacation;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(Config.serverUrl+\"/api/vacations/\"+vacationId);case 2:response=_context2.sent;vacation=response.data;return _context2.abrupt(\"return\",vacation);case 5:case\"end\":return _context2.stop();}}},_callee2);}));function getOneVacation(_x){return _getOneVacation.apply(this,arguments);}return getOneVacation;}()// Add vacation: \n},{key:\"addVacation\",value:function(){var _addVacation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(vacation){var myFormData,response,addedVacation;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:myFormData=new FormData();// Can contain strings and / or files.\nmyFormData.append(\"destination\",vacation.destination);myFormData.append(\"description\",vacation.description);myFormData.append(\"startDate\",vacation.startDate);myFormData.append(\"endDate\",vacation.endDate);myFormData.append(\"price\",vacation.price.toString());myFormData.append(\"image\",vacation.image[0]);myFormData.append(\"imageName\",vacation.imageName);_context3.next=10;return axios.post(Config.serverUrl+\"/api/vacations/\",myFormData);case 10:response=_context3.sent;addedVacation=response.data;vacationsStore.dispatch({type:VacationsActionType.AddVacation,payload:addedVacation});case 13:case\"end\":return _context3.stop();}}},_callee3);}));function addVacation(_x2){return _addVacation.apply(this,arguments);}return addVacation;}()// Update Vacation: \n},{key:\"updateVacation\",value:function(){var _updateVacation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(vacation){var myFormData,response,updatedVacation;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:myFormData=new FormData();// Can contain strings and / or files.\nmyFormData.append(\"destination\",vacation.destination);myFormData.append(\"description\",vacation.description);myFormData.append(\"startDate\",vacation.startDate);myFormData.append(\"endDate\",vacation.endDate);myFormData.append(\"price\",vacation.price.toString());if(!vacation.image)myFormData.append(\"imageName\",vacation.imageName);else{myFormData.append(\"image\",vacation.image[0]);myFormData.append(\"imageName\",vacation.imageName);}_context4.next=9;return axios.put(Config.serverUrl+\"/api/vacations/\"+vacation.vacationId,myFormData);case 9:response=_context4.sent;// Sending object without files.\nupdatedVacation=response.data;vacationsStore.dispatch({type:VacationsActionType.UpdateVacation,payload:updatedVacation});case 12:case\"end\":return _context4.stop();}}},_callee4);}));function updateVacation(_x3){return _updateVacation.apply(this,arguments);}return updateVacation;}()// Delete Vacation: \n},{key:\"deleteVacation\",value:function(){var _deleteVacation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(id){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.delete(Config.serverUrl+\"/api/vacations/\"+id);case 2:vacationsStore.dispatch({type:VacationsActionType.DeleteVacation,payload:id});case 3:case\"end\":return _context5.stop();}}},_callee5);}));function deleteVacation(_x4){return _deleteVacation.apply(this,arguments);}return deleteVacation;}()//Add follower:\n},{key:\"addFollower\",value:function(){var _addFollower=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(follower){var response,addedFollower;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return axios.post(Config.serverUrl+\"/api/liked-vacations/\",follower);case 2:response=_context6.sent;addedFollower=response.data;console.log(addedFollower);vacationsStore.dispatch({type:VacationsActionType.AddFollower,payload:follower.vacationId});case 6:case\"end\":return _context6.stop();}}},_callee6);}));function addFollower(_x5){return _addFollower.apply(this,arguments);}return addFollower;}()//Delete follower:\n},{key:\"deleteFollower\",value:function(){var _deleteFollower=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(follower){return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return axios.delete(Config.serverUrl+\"/api/liked-vacations/\"+follower.vacationId+\"/\"+follower.userId);case 2:vacationsStore.dispatch({type:VacationsActionType.DeleteFollower,payload:follower.vacationId});case 3:case\"end\":return _context7.stop();}}},_callee7);}));function deleteFollower(_x6){return _deleteFollower.apply(this,arguments);}return deleteFollower;}()}]);return VacationsService;}();var vacationsService=new VacationsService();export default vacationsService;","map":{"version":3,"names":["axios","VacationsActionType","vacationsStore","Config","authService","VacationsService","vacations","getState","getUserIdFromToken","currentUserId","length","get","serverUrl","response","data","dispatch","type","FetchVacations","payload","vacationId","vacation","myFormData","FormData","append","destination","description","startDate","endDate","price","toString","image","imageName","post","addedVacation","AddVacation","put","updatedVacation","UpdateVacation","id","delete","DeleteVacation","follower","addedFollower","console","log","AddFollower","userId","DeleteFollower","vacationsService"],"sources":["/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/John Bryce Projects/Project 3/Vacations Project 5.0/Frontend/src/Services/VacationsService.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport FollowerModel from \"../Models/FollowerModel\";\r\nimport VacationModel from \"../Models/VacationModel\";\r\nimport { VacationsActionType, vacationsStore } from \"../Redux/VacationsState\";\r\nimport Config from \"../Utils/Config\";\r\nimport authService from \"./AuthService\";\r\n\r\n\r\nclass VacationsService {\r\n\r\n    // Get all vacations + likes:\r\n    public async getAllVacationsWithLikes(): Promise<VacationModel[]> {\r\n\r\n        let vacations = vacationsStore.getState().vacations;\r\n        const currentUserId:number = await authService.getUserIdFromToken()\r\n\r\n        if (vacations.length === 0) {\r\n\r\n            const response = await axios.get<VacationModel[]>(Config.serverUrl+\"/api/liked-vacations/\"+currentUserId); // AJAX\r\n            vacations = response.data;\r\n            vacationsStore.dispatch({ type: VacationsActionType.FetchVacations, payload: vacations });\r\n        }\r\n\r\n        return vacations;\r\n    }\r\n\r\n    // Get one vacation:\r\n    public async getOneVacation(vacationId: number): Promise<VacationModel> {\r\n\r\n            const response = await axios.get<VacationModel>(Config.serverUrl+\"/api/vacations/\" + vacationId); \r\n            const vacation = response.data;\r\n\r\n        return vacation;\r\n    }\r\n\r\n    // Add vacation: \r\n    public async addVacation(vacation: VacationModel): Promise<void> { \r\n        \r\n        const myFormData = new FormData(); // Can contain strings and / or files.\r\n        myFormData.append(\"destination\", vacation.destination);\r\n        myFormData.append(\"description\", vacation.description);\r\n        myFormData.append(\"startDate\", vacation.startDate);\r\n        myFormData.append(\"endDate\", vacation.endDate);\r\n        myFormData.append(\"price\", vacation.price.toString());\r\n        myFormData.append(\"image\", vacation.image[0]);\r\n        myFormData.append(\"imageName\", vacation.imageName);\r\n\r\n\r\n        const response = await axios.post<VacationModel>(Config.serverUrl+\"/api/vacations/\", myFormData);\r\n        const addedVacation = response.data;\r\n        vacationsStore.dispatch({ type: VacationsActionType.AddVacation, payload: addedVacation });\r\n    }\r\n\r\n    // Update Vacation: \r\n    public async updateVacation(vacation: VacationModel): Promise<void> {\r\n        \r\n    \r\n            const myFormData = new FormData(); // Can contain strings and / or files.\r\n            myFormData.append(\"destination\", vacation.destination);\r\n            myFormData.append(\"description\", vacation.description);\r\n            myFormData.append(\"startDate\", vacation.startDate);\r\n            myFormData.append(\"endDate\", vacation.endDate);\r\n            myFormData.append(\"price\", vacation.price.toString());\r\n            if(!vacation.image)myFormData.append(\"imageName\", vacation.imageName);\r\n            else{\r\n                myFormData.append(\"image\", vacation.image[0]);\r\n                myFormData.append(\"imageName\", vacation.imageName);\r\n            }\r\n            \r\n            \r\n    \r\n\r\n        const response = await axios.put<VacationModel>(Config.serverUrl+\"/api/vacations/\" + vacation.vacationId, myFormData); // Sending object without files.\r\n        const updatedVacation = response.data;\r\n        vacationsStore.dispatch({ type: VacationsActionType.UpdateVacation, payload: updatedVacation });\r\n    }\r\n\r\n    // Delete Vacation: \r\n    public async deleteVacation(id: number): Promise<void> {\r\n\r\n        await axios.delete<void>(Config.serverUrl+\"/api/vacations/\" + id);\r\n\r\n        vacationsStore.dispatch({ type: VacationsActionType.DeleteVacation, payload: id });\r\n\r\n    }\r\n\r\n    //Add follower:\r\n    public async addFollower(follower: FollowerModel): Promise<void> { \r\n        \r\n        const response = await axios.post<FollowerModel>(Config.serverUrl+\"/api/liked-vacations/\", follower);\r\n        const addedFollower = response.data;\r\n        console.log(addedFollower);\r\n        vacationsStore.dispatch({ type: VacationsActionType.AddFollower, payload: follower.vacationId });\r\n    }\r\n\r\n\r\n    //Delete follower:\r\n    public async deleteFollower(follower: FollowerModel): Promise<void> {\r\n\r\n         await axios.delete<void>(Config.serverUrl+\"/api/liked-vacations/\" + follower.vacationId+\"/\"+follower.userId);\r\n\r\n        vacationsStore.dispatch({ type: VacationsActionType.DeleteFollower, payload: follower.vacationId });\r\n        \r\n\r\n    }\r\n}\r\n\r\nconst vacationsService = new VacationsService();\r\n\r\nexport default vacationsService;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}